
# 网络科学：社区

## Section 1: Introduction

### Introduction: Belgium
- Belgium被视为两种文化和平共存的典范，两种文化互不吞噬
- 比利时是双语国家：59%的公民自称弗拉芒人（讲荷兰语），40%是瓦隆人（讲法语）
- 问题：弗拉芒人和瓦隆人是否生活在一个无缝编织的社会中，没有人注意到谁是弗拉芒人谁是瓦隆人？还是比利时是同一边界内的两个国家，两个社会并排生活，最小化两个民族群体之间的互动？
- 2008年，Vincent Blondel及其学生将新的社区发现算法应用于比利时最大移动运营商之一的通话模式
- 算法旨在识别定期通过电话交谈的个体群体，将整个国家分解为许多小社区
- 结果出乎意料：比利时被分解为两个巨大的社区，每个社区由许多较小的朋友圈组成
- 在这两个群体中，社区之间有多个链接，但这些社区从不与另一个群体中的社区交流
- 在这两个超级群体之间，夹着第三个较小的社区群体，显然在比利时的两个部分之间调解

## Section 2: Examples of Communities

### Zachary's Karate Club
- 社会学家Wayne Zachary研究的34个空手道俱乐部成员的网络
- 链接捕获俱乐部成员在俱乐部外的互动
- 圆圈和方块表示俱乐部分裂后出现的两个派系（俱乐部主席和教练之间的争执后）
- 成员之间的分裂紧密遵循这些社区的边界
- 空手道俱乐部已成为测试社区发现算法的基准

#### Zachary's Karate Club的引用历史
- 在2002年Mark Newman将其用作社区检测基准之前，对该论文几乎没有兴趣
- 从那时起，对该论文的引用数量爆炸式增长
- 形成了一个"Zachary空手道俱乐部俱乐部"，任何会议上首先使用Zachary空手道俱乐部作为例子的科学家将被吸纳为会员并获奖

### 辅助信息的重要性
- 拥有外部辅助信息的网络特别有价值，可用于测试发现社区的质量
- 在空手道俱乐部中，俱乐部的分裂提供了这种额外的互动
- 在比利时手机用户[179]的社区结构中，用户使用的语言帮助我们解释获得的社区结构
- 其他例子包括科学合作网络，允许我们基于科学家所属的已知科学领域检查输出
- 在线网络，成员的活动模式提供有关他们真正联盟的见解
- 通信网络（如Twitter），其社区结构可以根据推文内容进行测试

### 生物模块
- 系统和网络生物学的发展是由对细胞工作原理的终极理解需要详细了解基础细胞网络的意识驱动的
- 社区在这一背景下扮演特殊角色，帮助我们理解特定细胞功能如何在细胞网络中编码
- Lee Hartwell（1999年，获诺贝尔医学奖前两年）强调生物必须超越单分子方法，关注参与相同细胞功能的一组分子，称之为模块

#### E. coli代谢中的模块
- Ravasz及其合作者在E. coli代谢中首先确定了这些模块
- 开发了一种算法，识别基于反应模式的分子组，形成可检测的社区
- 该算法不仅恢复了细菌代谢的一些生化不同模块，还启动了系统生物学在细胞网络社区结构方面的研究

#### 酵母遗传网络
- 图9.6显示了酵母内的遗传网络，突出显示负责特定细胞功能的社区
- 每个节点的颜色捕获其所属的主要生化类别，表明不同的功能类别在网络拓扑上不同的区域被分离
- 阴影区域表示属于嘧啶代谢的节点，这是预测的社区之一

## Section 3: Basics of Communities

### 社区的基本概念
- 我们专注于网络的中等规模
- 微观：节点和链接
- 中观：社区
- 宏观：整个网络

#### 基本假设
- H1：网络社区结构唯一编码在其接线图中
- H2：连通性假设：社区对应于连通子图
- H3：密度假设：社区对应于网络中的局部密集区域

### 完全子图作为社区
- 一个团是一个k个节点的完全子图
- 三角形很常见；较大的团很罕见
- 社区不一定对应完全子图，因为许多节点不直接相互连接
- 寻找网络的团是计算上相当困难的，是一个所谓的NP完全问题
- 注意每个团都是强社区，每个强社区都是弱社区

### 强社区和弱社区
- 考虑一个包含Nc个节点的连通子图C
  - 内部度数kiint：节点i连接到同一社区C中其他节点的链接集
  - 外部度数kiext：节点i连接到网络其余部分的链接集
- 如果kiext=0：i的所有邻居都属于C，C对i来说是一个好的社区
- 如果kiint=0：i的所有邻居都属于其他社区，那么i应该被分配到不同的社区

#### 强社区和弱社区的定义
- 强社区：C中的每个节点比与图中其余部分有更多的链接在社区内
- 弱社区：C的总内部度数超过其总外部度数
- 团 > 强社区 > 弱社区

### 图划分
- 芯片设计师每天面临一个异常复杂的问题：需要在芯片上放置25亿个晶体管，使它们的连接不交叉
- 为简化问题，设计师单独设计不同块，然后重新连接这些块
- 他们必须将集成电路(IC)的接线图划分为较小的子图，选择使它们之间的链接数最小的子图
- 这与并行计算中遇到的问题相似：将大型计算问题分割为子任务，并以最小化处理器间通信的方式分配给单个芯片

#### 图二分
- 将网络划分为两个相等的非重叠子图，使两个组中节点之间的链接数最小化
- 两个大小为n1和n2的子组，总组合数：N=10 → 256个分区(1毫秒)；N=100→1026个分区(10²¹年)

#### Kernighan-Lin算法
- 最佳图二分算法由Brian Kernighan和Shen Lin在1970年提出
- 算法将网络划分为两个预定大小的组
- 我们检查每对节点，每个组一个
- 识别交换后能最大程度减少切大小的对
- 交换它们
- 如果没有对减少切大小，我们交换增加切大小最少的对
- 重复直到每个节点移动一次

### 社区检测与图划分的区别
- 图划分旨在将网络划分为预定数量的较小子图
- 相比之下，社区检测旨在发现表征网络固有的社区结构
- 因此，在社区检测中，社区的数量和大小不是预定义的，而是编码在网络接线图中并需要被发现

### 社区的数量
- 社区检测：社区的数量和大小在开始时是未知的
- 划分：将网络划分为节点组，每个节点属于一个组
- Bell数：N个节点的可能分区数

### 层次聚类
- 在层次聚类中，我们需要通过从节点相似性矩阵派生的集群相似性矩阵定义一个集群到另一个集群的距离
- 我们可以使用三种不同的方法决定要合并哪些社区：
  - 单链接聚类：两个社区之间的相似性是最小的，其中i在一个社区，j在另一个社区
  - 完全链接聚类：两个社区之间的相似性是最大的，其中i在第一个社区，j在第二个社区
  - 平均链接聚类：两个社区之间的相似性属于不同社区的所有节点对的平均值

#### 层次聚类的步骤
1. 构建网络的相似性矩阵
2. 定义如何从邻接矩阵确定节点相似性
3. 层次聚类迭代地识别高相似性的节点组，遵循两种不同的策略之一
4. 构建层次树或树状图，可视化算法遵循的合并或分裂过程历史
5. 水平切割此树提供各种社区划分

#### 凝聚算法
- 算法步骤：
  1. 定义相似性矩阵（Ravasz算法）：直接连接和/或共享多个邻居的节点对相似性高
  2. 决定群体相似性：基于单链接、完全链接或平均集群相似性合并组
  3. 应用层次聚类：将每个节点分配到自己的社区，评估所有节点对的相似性
  4. 构建树状图

#### 分裂算法
- Girvan-Newman算法步骤：
  1. 定义中心性度量：链接中介度是所有节点对之间沿链接运行的最短路径数
  2. 层次聚类：计算每个链接的中心性，移除中心性最大的链接，重新计算，重复直到所有链接被移除

### 网络中的层次结构
- 层次模块化网络的三个关键特性：
  1. 无标度特性：网络是无标度的，度分布遵循幂律
  2. 聚类系数随k缩放：小k节点具有高聚类系数；高k节点（枢纽）具有小聚类系数
  3. 聚类系数独立于N：随机网络中C随N减小，而层次网络中C与N无关

#### 层次模型与随机网络
- 随机网络中连接模式是均匀的，缺乏可解释为社区的局部密度波动
- 这启发了社区组织的第四个假设：随机网络不应有社区结构

### 层次聚类中的模糊性
- 在层次聚类中，"切割"树状图的位置是模糊的
- 不同的切割级别会产生不同的社区划分
- 需要额外的标准来确定最佳划分

### 系统发育树状图
- 在生物信息学中，聚类和树状图已经被研究很长时间
- 例如，选择不同物种中相同蛋白质或基因的序列，相互比较
- 通过观察氨基酸/核苷酸保持位置的多少构建序列之间的相似性矩阵

## Section 4: Modularity

### 模块化
- 模块化是衡量社区划分质量的指标
- Newman的模块化公式：M = (LC/L) - ∑(kC/2L)²
  - LC：社区内的链接数
  - L：网络中的总链接数
  - kC：社区中的总度数

#### 随机假设
- 随机布线网络不应有社区结构
- 模块化通过比较实际网络与随机网络来衡量社区结构强度

#### 最大模块化假设
- 给定网络的最大模块化分区提供最佳社区结构
- 目标：找到最大化M的分区

#### 基于模块化的社区识别
- Newman的贪婪算法：
  1. 将每个节点分配到自己的社区
  2. 检查每对连接社区并计算合并它们的模块化变化
  3. 识别ΔM最大的社区对并合并它们
  4. 重复直到所有节点合并为一个社区
  5. 记录每一步并为模块化最大的分区选择

#### 模块化的限制
- 分辨率限制：模块化最大化无法检测小于此大小的社区
- 当两个社区之间的连接数较少时，模块化会促使它们合并
- 解决方案：使用不同的零模型

#### 模块化的在线资源
- Gephi、NetworkX等工具可用于计算模块化
- 快速贪婪算法和Louvain方法可处理数百万节点的网络

## Section 5: Overlapping Communities

### 重叠社区
- 许多网络中节点倾向于属于多个社区
- 社区检测算法通常将每个节点分配到一个社区，但现实网络中节点可能属于多个社区

#### 围渗法(Clique Percolation)
- 从k-团（k个节点的完全子图）开始
- "滚动"团到相邻团，两个k-团如果共享k-1个节点则被视为相邻
- k-团社区是通过相邻k-团的并集获得的最大连通子图
- 该算法能有效识别重叠社区

#### 链接聚类
- 基于链接相似性的层次算法
- 定义链接相似性：S(i,j) = |n+(i) ∩ n+(j)| / min(|n+(i)|, |n+(j)|)
- 应用层次聚类（单链接）
- 计算复杂度：对于稀疏网络为O(L²)

## Section 6: Characterizing Communities

### 社区特征
- 社区大小遵循幂律分布
- 权重可以帮助识别社区
- 在社交网络中，弱连接假设认为社区由权重较小的链接连接
- 在交通系统中，高中介度链接（与权重相关）连接不同社区

### 社区演化
- 节点加入社区的概率随着节点与社区的链接数增加而增长
- 与社区链接较少的节点比与社区链接较多的节点更可能离开
- 社区解体的概率随着与社区外节点的聚合链接权重增加而增加

## Section 7: Testing Communities

### 测试社区
- Newman-Girvan(NG)基准：N个节点在nc=4个社区中，同一社区节点连接概率为pint，否则为pext
- 控制参数：μ = (pint-pext)/(1-pext)
- 当μ增加时，社区结构变得更明显

#### 测量准确性
- 信息理论方法：使用互信息衡量两个分区之间的相似性
- 标准化互信息(NMI)：考虑两个分区的熵
- 兰氏-福特纳托-拉迪基(LFR)基准：更真实的社区结构模型

### 动态算法
- 自旋模型（Ising和Potts模型）
- 同步：每个节点是一个振荡器，同一社区中的节点更快同步
- 随机游走(Infomap)

#### Infomap算法
- 最大化地图方程：模块间移动信息 + 模块内移动信息
- 基于随机游走和信息理论
- 适用于大型网络

### 随机块模型(Stochastic Block Models)
- 将网络划分为r个节点组（块）
- 在每对块ri, rj之间，定义节点在两个块之间连接的概率
- 随机根据这些概率添加链接

## Section 8: Summary

### 总结
- 社区识别依赖于几个关于社区性质的基本假设：
  - 连通性假设：社区对应于连通子图
  - 密度假设：社区对应于网络中的局部密集区域
  - 随机假设：随机布线网络不应有社区结构
  - 最大模块化假设：最大模块化的分区提供最佳社区结构
- 每个假设都有其限制和适用场景
- 选择合适的算法取决于网络特征和具体应用
- 验证社区结构需要适当的基准测试和比较方法
```